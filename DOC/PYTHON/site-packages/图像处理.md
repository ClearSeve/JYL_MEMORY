# 图像处理

## pillow

```
from PIL import Image, ImageDraw,ImageFont
import  numpy as np

img = Image.open("D:\\1.jpg")
```

### rgb图像反相

```
a = np.array(img)
b = [255,255,255] - a
img = Image.fromarray(b.astype("uint8"))
```

### 图像缩放

img.thumbnail((200, 100))  
img = img.resize((200, 100), Image.ANTIALIAS)  

### 图像尺寸获取

width = img.size[0]  
height = img.size[1]

### 图像裁剪

img = img.crop((x1,y1,x2,y2))

### 绘制图形

```
draw =ImageDraw.Draw(img)
draw.line((20, 20, 150, 150), fill='red',width=2)
draw.rectangle((100, 200, 300, 400), outline='yellow',width=10)
draw.ellipse((350, 300, 500, 400), fill='yellowgreen', outline='wheat')
font = ImageFont.truetype("consola.ttf", 180, encoding="utf-8")
draw.text((10, 10), u'abcdef', fill='fuchsia',font=font)

img.save("D:\\ret.jpg")
```

### GIF提取

```
def SplitGif(ImgName,dstPath):
    im = Image.open(ImgName)
    index = 0
    for frame in ImageSequence.Iterator(im):
        frame = frame.convert('RGB')
        index = index+1
        pathName = dstPath + "\\%d.jpg"% index
        print(pathName)
        frame.save(pathName)
```

## imageio

```
import imageio
import os


def ImgeToGif(imageURI):
    staticImages = []
    for filename in os.listdir(imageURI):
       staticImages.append(imageio.imread(imageURI+'\\'+filename))
    writerKwargs = {'duration': '0.1'}
    imageWriter = imageio.get_writer(imageURI+'\\'+'AnimatedGif.gif', 'GIF', 'I', **writerKwargs)
    for image in staticImages:
        imageWriter.append_data(image)
    imageWriter.close()
```
