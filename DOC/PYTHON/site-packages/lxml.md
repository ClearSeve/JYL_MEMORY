# lxml

from lxml import etree  

## html解析

`xpathObj=etree.HTML(text)`   
读取html文本字符串初始化生成一个XPath解析对象
`xpathObj=etree.parse(obj,etree.HTMLParser())`    
obj可以是文件路径，解析html文件并自动纠正html内容错误  

转换出对应的字符串数据:
`result=etree.tostring(xpathObj,encoding='utf-8')`  
`txt = result.decode('utf-8')`  	

```
obj = xpathObj.xpath('//li[@class="jyl"]')
for val in obj:
    print(val.text)	xpath返回list对象  
text是标签包围的字符（不包括子标签内容）
```

## xml解析

```
xpathObj = etree.parse(xmlPathName)
Objs = xpathObj.xpath('//objs')
valstr = Objs[0].xpath('VAL')[0].text
```

## xml写入

```
root = etree.Element("root")
obj = etree.SubElement(root, "obj")
etree.SubElement(obj, "val").text  = 'abc'

doc = etree.ElementTree(root)
doc.write("D:\\1.xml",encoding="utf-8", xml_declaration=True,pretty_print=True)
```
